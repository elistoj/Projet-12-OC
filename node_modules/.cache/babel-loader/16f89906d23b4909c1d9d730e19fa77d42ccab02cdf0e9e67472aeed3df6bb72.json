{"ast":null,"code":"import mockData from'../mockData.json';const BASE_URL='http://localhost:3000/user';const FETCH_ERROR_MESSAGE='Failed to fetch data. Using mocked data.';export function fetchUserData(userId){return fetch(\"\".concat(BASE_URL,\"/\").concat(userId)).then(response=>response.json()).then(userData=>mapUserData(userData.data)).catch(()=>{console.warn(FETCH_ERROR_MESSAGE);const userDataFromMock=mockData.USER_MAIN_DATA.find(user=>user.id===parseInt(userId));return mapUserData(userDataFromMock);});}export function fetchUserActivity(userId){return fetch(\"\".concat(BASE_URL,\"/\").concat(userId,\"/activity\")).then(response=>response.json()).then(userActivity=>mapUserActivity(userActivity.data)).catch(()=>{console.warn(FETCH_ERROR_MESSAGE);const userActivityFromMock=mockData.USER_ACTIVITY.find(activity=>activity.userId===parseInt(userId));return mapUserActivity(userActivityFromMock);});}export function fetchUserAverageSessions(userId){return fetch(\"\".concat(BASE_URL,\"/\").concat(userId,\"/average-sessions\")).then(response=>response.json()).then(userAverageSessions=>mapUserAverageSessions(userAverageSessions.data)).catch(()=>{console.warn(FETCH_ERROR_MESSAGE);const userAverageSessionsFromMock=mockData.USER_AVERAGE_SESSIONS.find(session=>session.userId===parseInt(userId));return mapUserAverageSessions(userAverageSessionsFromMock);});}export function fetchUserPerformance(userId){return fetch(\"\".concat(BASE_URL,\"/\").concat(userId,\"/performance\")).then(response=>response.json()).then(userPerformance=>mapUserPerformance(userPerformance.data)).catch(()=>{console.warn(FETCH_ERROR_MESSAGE);const userPerformanceFromMock=mockData.USER_PERFORMANCE.find(performance=>performance.userId===parseInt(userId));return mapUserPerformance(userPerformanceFromMock);});}function mapUserData(userData){var _userData$TodayScore,_userData$userInfos$f,_userData$userInfos,_userData$userInfos$l,_userData$userInfos2,_userData$keyData$cal,_userData$keyData,_userData$keyData$pro,_userData$keyData2,_userData$keyData$car,_userData$keyData3,_userData$keyData$lip,_userData$keyData4;const scoreToUse=userData.score!==undefined?userData.score:(_userData$TodayScore=userData.TodayScore)!==null&&_userData$TodayScore!==void 0?_userData$TodayScore:0;return{id:userData.id,userInfos:{firstName:(_userData$userInfos$f=(_userData$userInfos=userData.userInfos)===null||_userData$userInfos===void 0?void 0:_userData$userInfos.firstName)!==null&&_userData$userInfos$f!==void 0?_userData$userInfos$f:'',lastName:(_userData$userInfos$l=(_userData$userInfos2=userData.userInfos)===null||_userData$userInfos2===void 0?void 0:_userData$userInfos2.lastName)!==null&&_userData$userInfos$l!==void 0?_userData$userInfos$l:''},keyData:{calorieCount:(_userData$keyData$cal=(_userData$keyData=userData.keyData)===null||_userData$keyData===void 0?void 0:_userData$keyData.calorieCount)!==null&&_userData$keyData$cal!==void 0?_userData$keyData$cal:0,proteinCount:(_userData$keyData$pro=(_userData$keyData2=userData.keyData)===null||_userData$keyData2===void 0?void 0:_userData$keyData2.proteinCount)!==null&&_userData$keyData$pro!==void 0?_userData$keyData$pro:0,carbohydrateCount:(_userData$keyData$car=(_userData$keyData3=userData.keyData)===null||_userData$keyData3===void 0?void 0:_userData$keyData3.carbohydrateCount)!==null&&_userData$keyData$car!==void 0?_userData$keyData$car:0,lipidCount:(_userData$keyData$lip=(_userData$keyData4=userData.keyData)===null||_userData$keyData4===void 0?void 0:_userData$keyData4.lipidCount)!==null&&_userData$keyData$lip!==void 0?_userData$keyData$lip:0},score:scoreToUse};}function mapUserActivity(userActivity){if(!userActivity||!Array.isArray(userActivity.sessions)){return{userId:'',sessions:[]};}return{userId:userActivity.userId,sessions:userActivity.sessions.map(session=>{var _session$day,_session$kilogram,_session$calories;return{day:(_session$day=session.day)!==null&&_session$day!==void 0?_session$day:'',kilogram:(_session$kilogram=session.kilogram)!==null&&_session$kilogram!==void 0?_session$kilogram:0,calories:(_session$calories=session.calories)!==null&&_session$calories!==void 0?_session$calories:0};})};}function mapUserAverageSessions(userAverageSessions){if(!userAverageSessions||!Array.isArray(userAverageSessions.sessions)){return{userId:'',sessions:[]};}return{userId:userAverageSessions.userId,sessions:userAverageSessions.sessions.map(session=>{var _session$day2,_session$sessionLengt;return{day:(_session$day2=session.day)!==null&&_session$day2!==void 0?_session$day2:'',sessionLength:(_session$sessionLengt=session.sessionLength)!==null&&_session$sessionLengt!==void 0?_session$sessionLengt:0};})};}function mapUserPerformance(userPerformance){if(!userPerformance||!Array.isArray(userPerformance.data)){return{userId:'',data:[]};}return{userId:userPerformance.userId,data:userPerformance.data.map(item=>{var _item$kind,_item$value;return{kind:(_item$kind=item.kind)!==null&&_item$kind!==void 0?_item$kind:'',value:(_item$value=item.value)!==null&&_item$value!==void 0?_item$value:0};})};}","map":{"version":3,"names":["mockData","BASE_URL","FETCH_ERROR_MESSAGE","fetchUserData","userId","fetch","concat","then","response","json","userData","mapUserData","data","catch","console","warn","userDataFromMock","USER_MAIN_DATA","find","user","id","parseInt","fetchUserActivity","userActivity","mapUserActivity","userActivityFromMock","USER_ACTIVITY","activity","fetchUserAverageSessions","userAverageSessions","mapUserAverageSessions","userAverageSessionsFromMock","USER_AVERAGE_SESSIONS","session","fetchUserPerformance","userPerformance","mapUserPerformance","userPerformanceFromMock","USER_PERFORMANCE","performance","_userData$TodayScore","_userData$userInfos$f","_userData$userInfos","_userData$userInfos$l","_userData$userInfos2","_userData$keyData$cal","_userData$keyData","_userData$keyData$pro","_userData$keyData2","_userData$keyData$car","_userData$keyData3","_userData$keyData$lip","_userData$keyData4","scoreToUse","score","undefined","TodayScore","userInfos","firstName","lastName","keyData","calorieCount","proteinCount","carbohydrateCount","lipidCount","Array","isArray","sessions","map","_session$day","_session$kilogram","_session$calories","day","kilogram","calories","_session$day2","_session$sessionLengt","sessionLength","item","_item$kind","_item$value","kind","value"],"sources":["C:/Users/elist/OneDrive/Documents/GitHub/Projet-12-OC/src/service/api.js"],"sourcesContent":["import mockData from '../mockData.json';\r\n\r\nconst BASE_URL = 'http://localhost:3000/user';\r\nconst FETCH_ERROR_MESSAGE = 'Failed to fetch data. Using mocked data.';\r\n\r\nexport function fetchUserData(userId) {\r\n  return fetch(`${BASE_URL}/${userId}`)\r\n    .then(response => response.json())\r\n    .then(userData => mapUserData(userData.data))\r\n    .catch(() => {\r\n      console.warn(FETCH_ERROR_MESSAGE);\r\n      const userDataFromMock = mockData.USER_MAIN_DATA.find(user => user.id === parseInt(userId));\r\n      return mapUserData(userDataFromMock);\r\n    });\r\n}\r\n\r\nexport function fetchUserActivity(userId) {\r\n  return fetch(`${BASE_URL}/${userId}/activity`)\r\n    .then(response => response.json())\r\n    .then(userActivity => mapUserActivity(userActivity.data))\r\n    .catch(() => {\r\n      console.warn(FETCH_ERROR_MESSAGE);\r\n      const userActivityFromMock = mockData.USER_ACTIVITY.find(activity => activity.userId === parseInt(userId));\r\n      return mapUserActivity(userActivityFromMock);\r\n    });\r\n}\r\n\r\nexport function fetchUserAverageSessions(userId) {\r\n  return fetch(`${BASE_URL}/${userId}/average-sessions`)\r\n    .then(response => response.json())\r\n    .then(userAverageSessions => mapUserAverageSessions(userAverageSessions.data))\r\n    .catch(() => {\r\n      console.warn(FETCH_ERROR_MESSAGE);\r\n      const userAverageSessionsFromMock = mockData.USER_AVERAGE_SESSIONS.find(session => session.userId === parseInt(userId));\r\n      return mapUserAverageSessions(userAverageSessionsFromMock);\r\n    });\r\n}\r\n\r\nexport function fetchUserPerformance(userId) {\r\n  return fetch(`${BASE_URL}/${userId}/performance`)\r\n    .then(response => response.json())\r\n    .then(userPerformance => mapUserPerformance(userPerformance.data))\r\n    .catch(() => {\r\n      console.warn(FETCH_ERROR_MESSAGE);\r\n      const userPerformanceFromMock = mockData.USER_PERFORMANCE.find(performance => performance.userId === parseInt(userId));\r\n      return mapUserPerformance(userPerformanceFromMock);\r\n    });\r\n}\r\n\r\n\r\nfunction mapUserData(userData) {\r\n  const scoreToUse = userData.score !== undefined ? userData.score : userData.TodayScore ?? 0;\r\n\r\n  return {\r\n    id: userData.id,\r\n    userInfos: {\r\n      firstName: userData.userInfos?.firstName ?? '',\r\n      lastName: userData.userInfos?.lastName ?? '',\r\n    },\r\n    keyData: {\r\n      calorieCount: userData.keyData?.calorieCount ?? 0,\r\n      proteinCount: userData.keyData?.proteinCount ?? 0,\r\n      carbohydrateCount: userData.keyData?.carbohydrateCount ?? 0,\r\n      lipidCount: userData.keyData?.lipidCount ?? 0,\r\n    },\r\n    score: scoreToUse,\r\n  };\r\n}\r\n\r\nfunction mapUserActivity(userActivity) {\r\n  if (!userActivity || !Array.isArray(userActivity.sessions)) {\r\n    return { userId: '', sessions: [] };\r\n  }\r\n\r\n  return {\r\n    userId: userActivity.userId,\r\n    sessions: userActivity.sessions.map(session => ({\r\n      day: session.day ?? '',\r\n      kilogram: session.kilogram ?? 0,\r\n      calories: session.calories ?? 0,\r\n    })),\r\n  };\r\n}\r\n\r\nfunction mapUserAverageSessions(userAverageSessions) {\r\n  if (!userAverageSessions || !Array.isArray(userAverageSessions.sessions)) {\r\n    return { userId: '', sessions: [] };\r\n  }\r\n\r\n  return {\r\n    userId: userAverageSessions.userId,\r\n    sessions: userAverageSessions.sessions.map(session => ({\r\n      day: session.day ?? '',\r\n      sessionLength: session.sessionLength ?? 0,\r\n    })),\r\n  };\r\n}\r\n\r\nfunction mapUserPerformance(userPerformance) {\r\n  if (!userPerformance || !Array.isArray(userPerformance.data)) {\r\n    return { userId: '', data: [] };\r\n  }\r\n\r\n  return {\r\n    userId: userPerformance.userId,\r\n    data: userPerformance.data.map(item => ({\r\n      kind: item.kind ?? '',\r\n      value: item.value ?? 0,\r\n    })),\r\n  };\r\n}"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}